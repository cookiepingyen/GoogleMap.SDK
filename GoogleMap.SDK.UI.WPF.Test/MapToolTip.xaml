<ToolTip x:Class="GoogleMap.SDK.UI.WPF.Test.MapToolTip"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:GoogleMap.SDK.UI.WPF.Test"
         xmlns:converters="clr-namespace:GoogleMap.SDK.UI.WPF.Test.Converters"
         mc:Ignorable="d"
         Background="Transparent"
         BorderBrush="Transparent"
         BorderThickness="0"
         Padding="0"
         HasDropShadow="False">
    <ToolTip.Resources>
        <converters:RatingToStarsConverter x:Key="RantingConverter"/>
    </ToolTip.Resources>

    <Border Background="White" 
            CornerRadius="8" 
            BorderBrush="#DDD"
            BorderThickness="1"
            Padding="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="6" ShadowDepth="1" 
                            Opacity="0.15" Color="#000000"/>
        </Border.Effect>

        <StackPanel MaxWidth="300">
            <!-- 店名 -->
            <TextBlock Text="{Binding PlaceName}" 
                      FontWeight="Bold"
                      FontSize="16"
                      Foreground="#222"
                      TextWrapping="Wrap"/>

            <!-- 評分與評論數 -->
            <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                <TextBlock Text="{Binding Rating}" 
                          Foreground="Black" 
                          FontSize="14"/>
                <TextBlock Text="{Binding Rating, Converter={StaticResource RantingConverter}}"
                            Foreground="Orange" 
                            FontSize="14" 
                            Margin="4,0,0,0"/>

                <TextBlock Text="{Binding UserRatingsTotal}" 
                          Foreground="Gray" 
                          FontSize="14" 
                          Margin="4,0,0,0"/>
            </StackPanel>

            <!-- 類別 -->
            <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                <TextBlock Text="{Binding BusinessStatus}" 
                          FontSize="13" 
                          FontWeight="Bold"
                          Margin="4,0,0,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="Red"/>
                            <!-- 預設為紅色，如果是「營業中」則改為綠色 -->
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding BusinessStatus}" Value="營業中">
                                    <Setter Property="Foreground" Value="#188038"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>

            <!-- 地址 -->
            <TextBlock Text="{Binding Address}" 
                      Foreground="Black" 
                      FontSize="13" 
                      Margin="0,2,0,0"
                      TextWrapping="Wrap"/>

            <!-- 電話 -->
            <TextBlock Text="{Binding Phone}" 
                      Foreground="#1A73E8" 
                      FontSize="13" 
                      Margin="0,2,0,0"
                      TextDecorations="Underline"
                      Cursor="Hand"/>
        </StackPanel>
    </Border>
</ToolTip>